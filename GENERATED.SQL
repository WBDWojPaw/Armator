/*
CREATED: 17.04.2020
MODIFIED: 30.04.2020
PROJECT: WBD-ARMATOR
MODEL: ARMATOR
COMPANY: POLITECHNIKA WARSZAWSKA
AUTHOR: PAWEł BUGYI I WOJCIECH ROKICKI
VERSION: 1.0
DATABASE: ORACLE 12C RELEASE 2
*/


-- CREATE SEQUENCES SECTION -------------------------------------------------

CREATE SEQUENCE BIUROSEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE PORTYSEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE LODZIESEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE MODELESEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE KLIENCISEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE CZARTERYSEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE ADRESYSEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE REJSYSEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE KURSYSEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE PRACOWNICYSEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE ATRAKCJESEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE WLASCICIELESEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE POCZTYSEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

CREATE SEQUENCE PLACOWKISEQ
 INCREMENT BY 1
 START WITH 1
 NOMAXVALUE
 NOMINVALUE
 CACHE 20
/

-- CREATE TABLES SECTION -------------------------------------------------

-- TABLE BIURA

CREATE TABLE BIURA(
  NR_BIURA INTEGER NOT NULL,
  NAZWA VARCHAR2(20 ) NOT NULL,
  DATA_ZALOZENIA DATE NOT NULL,
  NR_ADRESU INTEGER NOT NULL
)
/

-- CREATE INDEXES FOR TABLE BIURA

CREATE INDEX IX_RELATIONSHIP2 ON BIURA (NR_ADRESU)
/

-- ADD KEYS FOR TABLE BIURA

ALTER TABLE BIURA ADD CONSTRAINT BIUROPK PRIMARY KEY (NR_BIURA)
/

ALTER TABLE BIURA ADD CONSTRAINT NAZWA UNIQUE (NAZWA)
/

-- TABLE PORTY

CREATE TABLE PORTY(
  NR_PORTU INTEGER NOT NULL,
  NAZWA_PORTU VARCHAR2(20 ) NOT NULL,
  NR_ADRESU INTEGER NOT NULL,
  NR_PLACOWKI INTEGER
)
/

-- CREATE INDEXES FOR TABLE PORTY

CREATE INDEX IX_RELATIONSHIP11 ON PORTY (NR_ADRESU)
/

CREATE INDEX IX_RELATIONSHIP5 ON PORTY (NR_PLACOWKI)
/

-- ADD KEYS FOR TABLE PORTY

ALTER TABLE PORTY ADD CONSTRAINT PORTPK PRIMARY KEY (NR_PORTU)
/

ALTER TABLE PORTY ADD CONSTRAINT NAZWA_PORTU UNIQUE (NAZWA_PORTU)
/

-- TABLE LODZIE

CREATE TABLE LODZIE(
  NR_LODZI INTEGER NOT NULL,
  NAZWA VARCHAR2(20 ) NOT NULL,
  NR_REJESTRACYJNY VARCHAR2(30 ) NOT NULL,
  NR_BIURA INTEGER NOT NULL,
  NR_MODELU INTEGER NOT NULL,
  NR_PLACOWKI INTEGER
)
/

-- CREATE INDEXES FOR TABLE LODZIE

CREATE INDEX IX_BIURO_POSIADA_LODKI ON LODZIE (NR_BIURA)
/

CREATE INDEX IX_LODZ_JEST_MODELU ON LODZIE (NR_MODELU)
/

CREATE INDEX IX_RELATIONSHIP9 ON LODZIE (NR_PLACOWKI)
/

-- ADD KEYS FOR TABLE LODZIE

ALTER TABLE LODZIE ADD CONSTRAINT LODZPK PRIMARY KEY (NR_LODZI)
/

ALTER TABLE LODZIE ADD CONSTRAINT NR_REJESTRACYJNY UNIQUE (NR_REJESTRACYJNY)
/

-- TABLE MODELE_LODZI

CREATE TABLE MODELE_LODZI(
  NR_MODELU INTEGER NOT NULL,
  NAZWA VARCHAR2(20 ) NOT NULL,
  DLUGOSC_KADLUBA NUMBER(4,2) NOT NULL,
  LICZBA_OSOB INTEGER NOT NULL,
  TYP VARCHAR2(32 ) NOT NULL,
  TYP_PALIWA VARCHAR2(12 ) NOT NULL
        CONSTRAINT CHECKCONSTRAINTA1 CHECK (TYP_PALIWA IN ('BENZYNA', 'DIESEL', 'LPG', 'HYBRYDOWY', 'ELEKTRYCZNY', 'INNY'))
        CHECK (TYP_PALIWA IN ('BENZYNA', 'DIESEL', 'LPG', 'HYBRYDOWY', 'ELEKTRYCZNY', 'INNY'))
)
/

-- ADD KEYS FOR TABLE MODELE_LODZI

ALTER TABLE MODELE_LODZI ADD CONSTRAINT MODEL_LODZIPK PRIMARY KEY (NR_MODELU)
/

ALTER TABLE MODELE_LODZI ADD CONSTRAINT NAZWA_MODELU UNIQUE (NAZWA)
/

-- TABLE REJSY

CREATE TABLE REJSY(
  NR_REJSU INTEGER NOT NULL,
  NAZWA VARCHAR2(20 ) NOT NULL,
  OPIS VARCHAR2(200 ),
  DATA_OD DATE NOT NULL,
  DATA_DO DATE NOT NULL,
  CENA NUMBER(10,2) NOT NULL,
  NR_BIURA INTEGER NOT NULL
)
/

-- CREATE INDEXES FOR TABLE REJSY

CREATE INDEX IX_BIURO_OFERUJE_REJS ON REJSY (NR_BIURA)
/

-- ADD KEYS FOR TABLE REJSY

ALTER TABLE REJSY ADD CONSTRAINT REJSPK PRIMARY KEY (NR_REJSU)
/

-- TABLE KLIENCI

CREATE TABLE KLIENCI(
  NR_KLIENTA INTEGER NOT NULL,
  IMIE VARCHAR2(20 ) NOT NULL,
  NAZWISKO VARCHAR2(20 ) NOT NULL,
  PESEL VARCHAR2(12 ),
  DATA_URODZENIA DATE NOT NULL,
  NR_DOWODU VARCHAR2(20 ) NOT NULL,
  NR_TELEFONU VARCHAR2(20 ),
  EMAIL VARCHAR2(20 ),
  NR_BIURA INTEGER NOT NULL,
  NR_ADRESU INTEGER NOT NULL
)
/

-- CREATE INDEXES FOR TABLE KLIENCI

CREATE INDEX IX_BIURO_POSIADA_KLIENTA ON KLIENCI (NR_BIURA)
/

CREATE INDEX IX_RELATIONSHIP6 ON KLIENCI (NR_ADRESU)
/

-- ADD KEYS FOR TABLE KLIENCI

ALTER TABLE KLIENCI ADD CONSTRAINT KLIENTPK PRIMARY KEY (NR_KLIENTA)
/

ALTER TABLE KLIENCI ADD CONSTRAINT NR_DOWODU UNIQUE (NR_DOWODU)
/

-- TABLE CZARTERY

CREATE TABLE CZARTERY(
  NR_CZARTERU INTEGER NOT NULL,
  DATA_OD DATE NOT NULL,
  DATA_DO DATE NOT NULL,
  CENA NUMBER(10,2) NOT NULL,
  NR_KLIENTA INTEGER NOT NULL,
  NR_BIURA INTEGER NOT NULL
)
/

-- CREATE INDEXES FOR TABLE CZARTERY

CREATE INDEX IX_KLIENT_CZARTERUJE ON CZARTERY (NR_KLIENTA)
/

CREATE INDEX IX_BIURO_OFERUJE_CZARTER ON CZARTERY (NR_BIURA)
/

-- ADD KEYS FOR TABLE CZARTERY

ALTER TABLE CZARTERY ADD CONSTRAINT CZARTERPK PRIMARY KEY (NR_CZARTERU)
/

-- TABLE KURSY

CREATE TABLE KURSY(
  NR_KURSU INTEGER NOT NULL,
  NAZWA VARCHAR2(20 ) NOT NULL,
  OPIS VARCHAR2(200 ) NOT NULL,
  NR_BIURA INTEGER NOT NULL
)
/

-- CREATE INDEXES FOR TABLE KURSY

CREATE INDEX IX_BIURO_OFERUJE_KURS ON KURSY (NR_BIURA)
/

-- ADD KEYS FOR TABLE KURSY

ALTER TABLE KURSY ADD CONSTRAINT KURSPK PRIMARY KEY (NR_KURSU)
/

-- TABLE ATRAKCJE

CREATE TABLE ATRAKCJE(
  NR_ATRAKCJI INTEGER NOT NULL,
  NAZWA VARCHAR2(20 ) NOT NULL,
  OPIS VARCHAR2(200 ) NOT NULL,
  NR_ADRESU INTEGER NOT NULL
)
/

-- CREATE INDEXES FOR TABLE ATRAKCJE

CREATE INDEX IX_RELATIONSHIP10 ON ATRAKCJE (NR_ADRESU)
/

-- ADD KEYS FOR TABLE ATRAKCJE

ALTER TABLE ATRAKCJE ADD CONSTRAINT ATRAKCJAPK PRIMARY KEY (NR_ATRAKCJI)
/

-- TABLE PRACOWNICY

CREATE TABLE PRACOWNICY(
  NR_PRACOWNIKA INTEGER NOT NULL,
  IMIE VARCHAR2(20 ) NOT NULL,
  NAZWISKO VARCHAR2(20 ) NOT NULL,
  PESEL VARCHAR2(12 ),
  DATA_URODZENIA DATE NOT NULL,
  PLEC CHAR(1 ) NOT NULL
        CHECK (PLEC IN ('K', 'M')),
  DATA_ZATRUDNIENIA DATE NOT NULL,
  STANOWISKO VARCHAR2(20 ) NOT NULL
        CHECK (STANOWISKO IN ('MENADZER', 'KAPITAN', 'TECHNIK', 'SPRZATACZ', 'INNE')),
  WYNAGRODZENIE NUMBER(10,2),
  NR_KONTA CHAR(26 ),
  NR_TELEFONU VARCHAR2(20 ),
  EMAIL VARCHAR2(30 ),
  NR_BIURA INTEGER NOT NULL,
  NR_ADRESU INTEGER NOT NULL
)
/

-- CREATE INDEXES FOR TABLE PRACOWNICY

CREATE INDEX IX_BIURO_ZATRUDNIA_PRACOWNIKA ON PRACOWNICY (NR_BIURA)
/

CREATE INDEX IX_RELATIONSHIP4 ON PRACOWNICY (NR_ADRESU)
/

-- ADD KEYS FOR TABLE PRACOWNICY

ALTER TABLE PRACOWNICY ADD CONSTRAINT PRACOWNIKPK PRIMARY KEY (NR_PRACOWNIKA)
/

-- TABLE PLACOWKA_PRACOWNIK

CREATE TABLE PLACOWKA_PRACOWNIK(
  NR_PLACOWKI INTEGER NOT NULL,
  NR_PRACOWNIKA INTEGER NOT NULL,
  DATA_OD DATE NOT NULL,
  DATA_DO DATE
)
/

-- TABLE LODZ_CZARTER

CREATE TABLE LODZ_CZARTER(
  NR_LODZI INTEGER NOT NULL,
  NR_CZARTERU INTEGER NOT NULL
)
/

-- TABLE REJS_ATRAKCJA

CREATE TABLE REJS_ATRAKCJA(
  NR_REJSU INTEGER NOT NULL,
  NR_ATRAKCJI INTEGER NOT NULL
)
/

-- TABLE REJS_KURS

CREATE TABLE REJS_KURS(
  NR_REJSU INTEGER NOT NULL,
  NR_KURSU INTEGER NOT NULL
)
/

-- TABLE REJS_PORT

CREATE TABLE REJS_PORT(
  NR_REJSU INTEGER NOT NULL,
  NR_PLACOWKI INTEGER NOT NULL,
  KOLEJNOSC INTEGER NOT NULL
)
/

-- TABLE KLIENT_REJS

CREATE TABLE KLIENT_REJS(
  NR_KLIENTA INTEGER NOT NULL,
  NR_REJSU INTEGER NOT NULL
)
/

-- TABLE REJS_LODZ

CREATE TABLE REJS_LODZ(
  NR_REJSU INTEGER NOT NULL,
  NR_LODZI INTEGER NOT NULL
)
/

-- TABLE WLASCICIELE

CREATE TABLE WLASCICIELE(
  NR_WLASCICIELA INTEGER NOT NULL,
  IMIE VARCHAR2(20 ) NOT NULL,
  NAZWISKO VARCHAR2(30 ) NOT NULL,
  DATA_OD DATE NOT NULL,
  DATA_DO DATE,
  NR_BIURA INTEGER NOT NULL
)
/

-- CREATE INDEXES FOR TABLE WLASCICIELE

CREATE INDEX IX_RELATIONSHIP1 ON WLASCICIELE (NR_BIURA)
/

-- ADD KEYS FOR TABLE WLASCICIELE

ALTER TABLE WLASCICIELE ADD CONSTRAINT PK_WLASCICIELE PRIMARY KEY (NR_WLASCICIELA)
/

-- TABLE POCZTY

CREATE TABLE POCZTY(
  NR_POCZTY INTEGER NOT NULL,
  KOD_POCZTY CHAR(6 ) NOT NULL,
  POCZTA VARCHAR2(20 ) NOT NULL
)
/

-- ADD KEYS FOR TABLE POCZTY

ALTER TABLE POCZTY ADD CONSTRAINT PK_POCZTY PRIMARY KEY (NR_POCZTY)
/

ALTER TABLE POCZTY ADD CONSTRAINT KOD_POCZTY UNIQUE (KOD_POCZTY)
/

-- TABLE ADRESY

CREATE TABLE ADRESY(
  NR_ADRESU INTEGER NOT NULL,
  KRAJ VARCHAR2(30 ) NOT NULL,
  MIASTO VARCHAR2(20 ) NOT NULL,
  ULICA VARCHAR2(30 ) NOT NULL,
  NR_LOKALU VARCHAR2(10 ) NOT NULL,
  NR_POCZTY INTEGER NOT NULL
)
/

-- CREATE INDEXES FOR TABLE ADRESY

CREATE INDEX IX_RELATIONSHIP3 ON ADRESY (NR_POCZTY)
/

-- ADD KEYS FOR TABLE ADRESY

ALTER TABLE ADRESY ADD CONSTRAINT PK_ADRESY PRIMARY KEY (NR_ADRESU)
/

-- TABLE PLACOWKI

CREATE TABLE PLACOWKI(
  NR_PLACOWKI INTEGER NOT NULL,
  DATA_ZALOZENIA DATE NOT NULL,
  NR_BIURA INTEGER NOT NULL,
  NR_ADRESU INTEGER NOT NULL
)
/

-- CREATE INDEXES FOR TABLE PLACOWKI

CREATE INDEX IX_RELATIONSHIP8 ON PLACOWKI (NR_BIURA)
/

CREATE INDEX IX_RELATIONSHIP7 ON PLACOWKI (NR_ADRESU)
/

-- ADD KEYS FOR TABLE PLACOWKI

ALTER TABLE PLACOWKI ADD CONSTRAINT PK_PLACOWKI PRIMARY KEY (NR_PLACOWKI)
/

-- TRIGGER FOR SEQUENCE BIUROSEQ FOR COLUMN NR_BIURA IN TABLE BIURA ---------
CREATE OR REPLACE TRIGGER TS_BIURA_BIUROSEQ BEFORE INSERT
ON BIURA FOR EACH ROW
BEGIN
  :NEW.NR_BIURA := BIUROSEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_BIURA_BIUROSEQ AFTER UPDATE OF NR_BIURA
ON BIURA FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_BIURA IN TABLE BIURA AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE PORTYSEQ FOR COLUMN NR_PORTU IN TABLE PORTY ---------
CREATE OR REPLACE TRIGGER TS_PORTY_PORTYSEQ BEFORE INSERT
ON PORTY FOR EACH ROW
BEGIN
  :NEW.NR_PORTU := PORTYSEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_PORTY_PORTYSEQ AFTER UPDATE OF NR_PORTU
ON PORTY FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_PORTU IN TABLE PORTY AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE LODZIESEQ FOR COLUMN NR_LODZI IN TABLE LODZIE ---------
CREATE OR REPLACE TRIGGER TS_LODZIE_LODZIESEQ BEFORE INSERT
ON LODZIE FOR EACH ROW
BEGIN
  :NEW.NR_LODZI := LODZIESEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_LODZIE_LODZIESEQ AFTER UPDATE OF NR_LODZI
ON LODZIE FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_LODZI IN TABLE LODZIE AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE MODELESEQ FOR COLUMN NR_MODELU IN TABLE MODELE_LODZI ---------
CREATE OR REPLACE TRIGGER TS_MODELE_LODZI_MODELESEQ BEFORE INSERT
ON MODELE_LODZI FOR EACH ROW
BEGIN
  :NEW.NR_MODELU := MODELESEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_MODELE_LODZI_MODELESEQ AFTER UPDATE OF NR_MODELU
ON MODELE_LODZI FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_MODELU IN TABLE MODELE_LODZI AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE REJSYSEQ FOR COLUMN NR_REJSU IN TABLE REJSY ---------
CREATE OR REPLACE TRIGGER TS_REJSY_REJSYSEQ BEFORE INSERT
ON REJSY FOR EACH ROW
BEGIN
  :NEW.NR_REJSU := REJSYSEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_REJSY_REJSYSEQ AFTER UPDATE OF NR_REJSU
ON REJSY FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_REJSU IN TABLE REJSY AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE KLIENCISEQ FOR COLUMN NR_KLIENTA IN TABLE KLIENCI ---------
CREATE OR REPLACE TRIGGER TS_KLIENCI_KLIENCISEQ BEFORE INSERT
ON KLIENCI FOR EACH ROW
BEGIN
  :NEW.NR_KLIENTA := KLIENCISEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_KLIENCI_KLIENCISEQ AFTER UPDATE OF NR_KLIENTA
ON KLIENCI FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_KLIENTA IN TABLE KLIENCI AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE CZARTERYSEQ FOR COLUMN NR_CZARTERU IN TABLE CZARTERY ---------
CREATE OR REPLACE TRIGGER TS_CZARTERY_CZARTERYSEQ BEFORE INSERT
ON CZARTERY FOR EACH ROW
BEGIN
  :NEW.NR_CZARTERU := CZARTERYSEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_CZARTERY_CZARTERYSEQ AFTER UPDATE OF NR_CZARTERU
ON CZARTERY FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_CZARTERU IN TABLE CZARTERY AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE KURSYSEQ FOR COLUMN NR_KURSU IN TABLE KURSY ---------
CREATE OR REPLACE TRIGGER TS_KURSY_KURSYSEQ BEFORE INSERT
ON KURSY FOR EACH ROW
BEGIN
  :NEW.NR_KURSU := KURSYSEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_KURSY_KURSYSEQ AFTER UPDATE OF NR_KURSU
ON KURSY FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_KURSU IN TABLE KURSY AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE ATRAKCJESEQ FOR COLUMN NR_ATRAKCJI IN TABLE ATRAKCJE ---------
CREATE OR REPLACE TRIGGER TS_ATRAKCJE_ATRAKCJESEQ BEFORE INSERT
ON ATRAKCJE FOR EACH ROW
BEGIN
  :NEW.NR_ATRAKCJI := ATRAKCJESEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_ATRAKCJE_ATRAKCJESEQ AFTER UPDATE OF NR_ATRAKCJI
ON ATRAKCJE FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_ATRAKCJI IN TABLE ATRAKCJE AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE PRACOWNICYSEQ FOR COLUMN NR_PRACOWNIKA IN TABLE PRACOWNICY ---------
CREATE OR REPLACE TRIGGER TS_PRACOWNICY_PRACOWNICYSEQ BEFORE INSERT
ON PRACOWNICY FOR EACH ROW
BEGIN
  :NEW.NR_PRACOWNIKA := PRACOWNICYSEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_PRACOWNICY_PRACOWNICYSEQ AFTER UPDATE OF NR_PRACOWNIKA
ON PRACOWNICY FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_PRACOWNIKA IN TABLE PRACOWNICY AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE WLASCICIELESEQ FOR COLUMN NR_WLASCICIELA IN TABLE WLASCICIELE ---------
CREATE OR REPLACE TRIGGER TS_WLASCICIELE_WLASCICIELESEQ BEFORE INSERT
ON WLASCICIELE FOR EACH ROW
BEGIN
  :NEW.NR_WLASCICIELA := WLASCICIELESEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_WLASCICIELE_WLASCICIELESEQ AFTER UPDATE OF NR_WLASCICIELA
ON WLASCICIELE FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_WLASCICIELA IN TABLE WLASCICIELE AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE POCZTYSEQ FOR COLUMN NR_POCZTY IN TABLE POCZTY ---------
CREATE OR REPLACE TRIGGER TS_POCZTY_POCZTYSEQ BEFORE INSERT
ON POCZTY FOR EACH ROW
BEGIN
  :NEW.NR_POCZTY := POCZTYSEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_POCZTY_POCZTYSEQ AFTER UPDATE OF NR_POCZTY
ON POCZTY FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_POCZTY IN TABLE POCZTY AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE ADRESYSEQ FOR COLUMN NR_ADRESU IN TABLE ADRESY ---------
CREATE OR REPLACE TRIGGER TS_ADRESY_ADRESYSEQ BEFORE INSERT
ON ADRESY FOR EACH ROW
BEGIN
  :NEW.NR_ADRESU := ADRESYSEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_ADRESY_ADRESYSEQ AFTER UPDATE OF NR_ADRESU
ON ADRESY FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_ADRESU IN TABLE ADRESY AS IT USES SEQUENCE.');
END;
/

-- TRIGGER FOR SEQUENCE PLACOWKISEQ FOR COLUMN NR_PLACOWKI IN TABLE PLACOWKI ---------
CREATE OR REPLACE TRIGGER TS_PLACOWKI_PLACOWKISEQ BEFORE INSERT
ON PLACOWKI FOR EACH ROW
BEGIN
  :NEW.NR_PLACOWKI := PLACOWKISEQ.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TSU_PLACOWKI_PLACOWKISEQ AFTER UPDATE OF NR_PLACOWKI
ON PLACOWKI FOR EACH ROW
BEGIN
  RAISE_APPLICATION_ERROR(-20010,'CANNOT UPDATE COLUMN NR_PLACOWKI IN TABLE PLACOWKI AS IT USES SEQUENCE.');
END;
/


-- CREATE FOREIGN KEYS (RELATIONSHIPS) SECTION ------------------------------------------------- 

ALTER TABLE PRACOWNICY ADD CONSTRAINT BIURO_ZATRUDNIA_PRACOWNIKA FOREIGN KEY (NR_BIURA) REFERENCES BIURA (NR_BIURA)
/



ALTER TABLE LODZIE ADD CONSTRAINT BIURO_POSIADA_LODZ FOREIGN KEY (NR_BIURA) REFERENCES BIURA (NR_BIURA)
/



ALTER TABLE LODZIE ADD CONSTRAINT LODZ_JEST_MODELU FOREIGN KEY (NR_MODELU) REFERENCES MODELE_LODZI (NR_MODELU)
/



ALTER TABLE CZARTERY ADD CONSTRAINT KLIENT_CZARTERUJE FOREIGN KEY (NR_KLIENTA) REFERENCES KLIENCI (NR_KLIENTA)
/



ALTER TABLE CZARTERY ADD CONSTRAINT BIURO_OFERUJE_CZARTER FOREIGN KEY (NR_BIURA) REFERENCES BIURA (NR_BIURA)
/



ALTER TABLE KURSY ADD CONSTRAINT BIURO_OFERUJE_KURS FOREIGN KEY (NR_BIURA) REFERENCES BIURA (NR_BIURA)
/



ALTER TABLE KLIENCI ADD CONSTRAINT BIURO_POSIADA_KLIENTA FOREIGN KEY (NR_BIURA) REFERENCES BIURA (NR_BIURA)
/



ALTER TABLE REJSY ADD CONSTRAINT BIURO_OFERUJE_REJS FOREIGN KEY (NR_BIURA) REFERENCES BIURA (NR_BIURA)
/



ALTER TABLE WLASCICIELE ADD CONSTRAINT BIURO_MA_WLASCICIELA FOREIGN KEY (NR_BIURA) REFERENCES BIURA (NR_BIURA)
/



ALTER TABLE BIURA ADD CONSTRAINT BIURO_MA_ADRES FOREIGN KEY (NR_ADRESU) REFERENCES ADRESY (NR_ADRESU)
/



ALTER TABLE ADRESY ADD CONSTRAINT ADRES_MA_POCZTE FOREIGN KEY (NR_POCZTY) REFERENCES POCZTY (NR_POCZTY)
/



ALTER TABLE PRACOWNICY ADD CONSTRAINT PRACOWNIK_MA_ADRES FOREIGN KEY (NR_ADRESU) REFERENCES ADRESY (NR_ADRESU)
/



ALTER TABLE ATRAKCJE ADD CONSTRAINT ADRAKCJA_MA_ADRES FOREIGN KEY (NR_ADRESU) REFERENCES ADRESY (NR_ADRESU)
/



ALTER TABLE KLIENCI ADD CONSTRAINT KLIENT_MA_ADRES FOREIGN KEY (NR_ADRESU) REFERENCES ADRESY (NR_ADRESU)
/



ALTER TABLE PORTY ADD CONSTRAINT PORT_MA_ADRES FOREIGN KEY (NR_ADRESU) REFERENCES ADRESY (NR_ADRESU)
/



ALTER TABLE PLACOWKI ADD CONSTRAINT BIURO_POSIADA_PLACOWKE FOREIGN KEY (NR_BIURA) REFERENCES BIURA (NR_BIURA)
/



ALTER TABLE LODZIE ADD CONSTRAINT PLACOWKA_POSIADA_LODZ FOREIGN KEY (NR_PLACOWKI) REFERENCES PLACOWKI (NR_PLACOWKI)
/



ALTER TABLE PLACOWKA_PRACOWNIK ADD CONSTRAINT PLAC_ZATRUD_PRAC_PLACOWKA FOREIGN KEY (NR_PLACOWKI) REFERENCES PLACOWKI (NR_PLACOWKI)
/



ALTER TABLE PORTY ADD CONSTRAINT PLACOWKA_JEST_W_PORCIE FOREIGN KEY (NR_PLACOWKI) REFERENCES PLACOWKI (NR_PLACOWKI)
/



ALTER TABLE PLACOWKI ADD CONSTRAINT PLACOWKA_MA_ADRES FOREIGN KEY (NR_ADRESU) REFERENCES ADRESY (NR_ADRESU)
/





